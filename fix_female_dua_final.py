import re

# Path to the file
file_path = r"d:\Code programs\prayer-companion-pro\src\lib\dua-data.ts"

# Regex replacements (same as before)
replacements = [
    ("لهن", "لها"),
    ("عافهن", "عافها"),
    ("عنهن", "عنها"),
    ("نزلهن", "نزلها"),
    ("مدخلهن", "مدخلها"),
    ("اغسلهن", "اغسلها"),
    ("نقهن", "نقها"),
    ("إنهن", "إنها"),
    ("صبرن", "صبرت"),
    ("فلم يجزعن", "فلم تجزع"),
    ("فامنحهن", "فامنحها"),
    ("أجورهم", "أجرها"), 
    ("نزكيهن", "نزكيها"),
    ("نحسبهن", "نحسبها"),
    ("أنهن", "أنها"),
    ("آمن", "آمنت"),
    ("عملن", "عملت"),
    ("فاجعل لهن", "فاجعل لها"),
    ("ربهن", "ربها"),
    ("ترحمهن", "ترحمها"),
    ("ترضى عنهن", "ترضى عنها"),
    ("تسلمهن", "تسلمها"),
    ("عملهن", "عملها"),
    ("يلقينك", "تلقاك"),
    ("كتابهن", "كتابها"),
    ("حسابهن", "حسابها"),
    ("مثواهن", "مثواها"),
    ("ميتاتنا", "فقيدتنا"),
    ("شهدن", "شهدت"),
    ("تجمعهن", "تجمعها"),
    ("سيئآتهن", "سيئاتها"),
    ("ذنوبهن", "ذنوبها"),
    ("هن إمائك", "هي أمتك"),
    ("وليس لهن", "وليس لها"),
    ("يرحمهن", "يرحمها"),
    ("فاجعلهن", "فاجعلها"),
    ("منعمات", "منعمة"),
    ("قبورهن", "قبرها"),
    ("وحشتهن", "وحشتها"),
    ("تجمعنا بهن", "تجمعنا بها"),
    ("صبرت إمائك", "صبرت أمتك"),
    ("تجازيهن", "تجازيها"),
    ("صبرهن", "صبرها"),
    ("تجعلهن", "تجعلها"),
    ("ذويهن", "ذويها"),
    ("ذنوبهن", "ذنوبها"),
    ("خطاياهن", "خطاياها"),
    ("أرزقهن", "أرزقها"),
    ("عليهن", "عليها"),
    ("يظمأن", "تظمأ"),
    ("ترزقهن", "ترزقها"),
    ("ارحمهن", "ارحمها"),
    ("تجعلهن", "تجعلها"),
    ("شقيات", "شقية"),
    ("إمائك كن يخفنك", "أمتك كانت تخافك"),
    ("يرجون", "ترجو"),
    ("يخشين", "تخشى"),
    ("فأرزقهن", "فأرزقها"),
    ("عليهن", "عليها"),
    ("تجزهن", "تجزها"),
    ("حسناتهن", "حسناتها"),
    ("خطاياهن", "خطاياها"),
    ("احفظهن", "احفظها"),
    ("استرهن", "استرها"),
    ("تخزهن", "تخزها"),
    ("ميزانهن", "ميزانها"),
    ("اقدامهن", "اقدامها"),
    ("فقيداتنا", "فقيدتنا"),
    ("مطمئنات", "مطمئنة"),
    ("آمنات", "آمنة"),
    ("واثقات", "واثقة"),
    ("سابقات", "سابقة"),
    ("اجعلهن", "اجعلها"),
    ("تحيتهن", "تحيتها"),
    ("آمنهن", "آمنها"),
    ("انفسهن", "نفسها"),
    ("تعذبهم", "تعذبها"),
    ("تثبتهم", "تثبتها"),
    ("إليهم", "إليها"),
    ("فيهم", "فيها"),
    ("احشرهم", "احشرها"),
    ("اسقهم", "اسقها"),
    ("اسكنهن", "اسكنها"),
    ("إنهن إمائك وبنات عبيدك", "إنها أمتك وبنت عبدك"),
    ("خرجن", "خرجت"),
    ("احبائها", "احبائها"),
    ("ملاقياته", "ملاقيته"),
    ("انقلهن", "انقلها"),
    ("عيدهن", "عيدها"),
    ("درجتهن", "درجتها"),
    ("اخلفهن", "اخلفها"),
    ("عقبهن", "عقبها"),
    ("لهن", "لها"),
    ("اطعمهن", "اطعمها"),
    ("اسقهن", "اسقها"),
    ("اجعلهن", "اجعلها"),
    ("تقول لهن", "تقول لها"),
    ("ادخلن", "ادخلي"),
    ("إن كن إمائك", "إن كانت أمتك"),
    ("غير أهلاً", "غير أهل"),
    ("لتسعهن", "لتسعها"),
    ("يحتجن", "تحتاج"),
    ("عذابهن", "عذابها"),
    ("ارواحاً", "روحاً"),
    ("تجعلهن", "تجعلها"),
    ("واقفات", "واقفة"),
    ("مبتسمات", "مبتسمة"),
    ("وهن", "وهي"),
    ("قبورهن", "قبرها"),
    ("دارهن", "دارها"),
    ("الضاحكات المستبشرات", "الضاحكة المستبشرة"),
    ("اجعلهم", "اجعلها"),
    ("ينعمون", "تنعم"),
    ("يسجدون", "تسجد"),
    ("يكرمون", "تكرم"),
    ("عليهم", "عليها"),
    ("بهم", "بها"),
    ("ارواحاً", "روحاً"),
    ("كانت", "كانت"),
    ("اجعلها", "اجعلها"),
    ("موتهم", "موتها"),
    ("رحيلهم", "رحيلها"),
    ("اصواتهم", "صوتها"),
    ("تركوا", "تركت"),
    ("قبورهم", "قبرها"),
    ("موتانا", "فقيدتنا"),
    ("نراهم", "نراها"),
    ("ثراهم", "ثراها"),
    ("مثواهم", "مثواها"),
    ("مأواهم", "مأواها"),
    ("مستقرا لهم", "مستقرا لها"),
    ("اصبحوا", "اصبحت"),
    ("قبورهم", "قبرها"),
    ("عنهم", "عنها"),
    ("ارواحهم", "روحها"),
    ("لهم", "لها"),
    ("سكنوا", "سكنت"),
    ("يبتسمون", "تبتسم"),
    ("غابوا", "غابت"),
    ("ارحمهم", "ارحمها"),
    ("اسعدهم", "اسعدها"),
    ("اجعله", "اجعلها"),
    ("له", "لها"),
    ("ربه", "ربها"),
    ("تنساه", "تنساها"),
    ("ارحمه", "ارحمها"),
    ("اغفر له", "اغفر لها"),
    ("انظارهم", "انظارها"),
    ("ارواحهم", "روحها"),
    ("اغفر لهم", "اغفر لها"),
    ("عليهم", "عليها"),
    ("اجعلهم", "اجعلها"),
    ("متقابلين", "متقابلة"),
    ("هم", "هي"),
    ("احبائهم", "احبائها"),
    ("منعمين مترفين", "منعمة مترفة"),
    ("فراقهم", "فراقها"),
    ("وحشتهم", "وحشتها"),
    ("ديارهم", "ديارها"),
    ("غربتنا بعدهم", "غربتنا بعدها"),
    ("فقدهم", "فقدها"),
    ("عوضهم", "عوضها"),
    ("آخرتهم", "آخرتها"),
    ("دنياهم", "دنياها"),
    ("قبورهم", "قبرها"),
    ("يستبشرون", "تستبشر"),
    ("عليهم", "عليها"),
    ("حسناته", "حسناتها"),
    ("اجعله", "اجعلها"),
    ("ارحمه", "ارحمها"),
    ("اغفر له", "اغفر لها"),
    ("اجعله", "اجعلها"),
    ("آمنا مطمئنا", "آمنة مطمئنة"),
    ("يمينه", "يمينها"),
    ("يساره", "يسارها"),
    ("فوه", "فوقها"),
    ("تحته", "تحتها"),
    ("احشره", "احشرها"),
    ("لهم", "لها"),
    ("المتوفي", "المتوفاة"),
    ("له", "لها"),
    ("لأهله", "لأهلها"),
    ("أحبائه", "أحبائها"),
    ("إنه", "إنها"),
    ("كان", "كانت"),
    ("عبادك", "إمائك"),
    ("يشهدون", "تشهد"),
    ("نزله", "نزلها"),
    ("اعفو عنه", "اعفو عنها"),
    ("اغفر له", "اغفر لها"),
    ("اجعله", "اجعلها"),
    ("عليه", "عليها"),
    ("يحزنون", "تحزن"),
    ("عنهم", "عنها"),
    ("فإنهم", "فإنها"),
    ("ضيوفك", "ضيفتك"),
    ("مدخلهم", "مدخلها"),
    ("اغسلهم", "اغسلها"),
    ("نقهم", "نقها"),
    ("لهم", "لها"),
    ("ارحمهم", "ارحمها"),
    ("دارهم", "دارها"),
    ("مستقرا لهم", "مستقرا لها"),
    ("اظلهم", "اظلها"),
    ("عليهم", "عليها"),
    ("إليه", "إليها"),
    ("تعذبه", "تعذبها"),
    ("لهم", "لها"),
    ("قبورهم", "قبرها"),
    ("بصرهم", "بصرها"),
    ("اجعلهم", "اجعلها"),
    ("مستبشرين", "مستبشرة"),
    ("ارزقهم", "ارزقها"),
    ("آنسهم", "آنسها"),
    ("عليها", "عليها"),
    ("وجوه موتانا", "وجه فقيدتنا"),
    ("فارقونا", "فارقتنا"),
    ("قبورهم", "قبرها"),
    ("درجاتهم", "درجاتها"),
    ("اجعلهم", "اجعلها"),
    ("لقائهم", "لقائها"),
    ("اخذتهم", "اخذتها"),
    ("قبورهم", "قبرها"),
    ("فقدناهم", "فقدناها"),
    ("مرقدهم", "مرقدها"),
    ("حيلتهم", "حيلتها"),
    ("قبورهم", "قبرها"),
    ("لهم", "لها"),
    ("وحشتهم", "وحشتها"),
    ("وحدتهم", "وحدتها"),
    ("عبادك", "أمتك"),
    ("المتوفيات", "المتوفاة"),
    ("إمائك", "أمتك"),
    ("بنات عبيدك", "بنت عبدك"),
    ("هن", "هي"),
    ("موتانا", "فقيدتنا"),
    ("اظلهن", "اظلها"),
    ("بصرهن", "بصرها"),
    ("مستبشرات", "مستبشرة"),
    ("آنسهن", "آنسها"),
    ("درجاتهن", "درجاتها"),
    ("فقدناهن", "فقدناها"),
    ("مرقدهن", "مرقدها"),
    ("حيلتهن", "حيلتها"),
    ("وحدتهن", "وحدتها"),
    ("لهم", "لها"),
]

def apply_replacements(text):
    for old, new in replacements:
        pattern = r"\b([وفلب]?)" + re.escape(old) + r"\b"
        replacement = r"\1" + new
        text = re.sub(pattern, replacement, text)
    
    # Manual cleanups
    text = text.replace("فقيدتنا وموتى المسلمين", "فقيدتنا وموتى المسلمين")
    text = text.replace("فقيدتنا وموتي المسلمين", "فقيدتنا وموتى المسلمين")
    return text

# Read the file
with open(file_path, "r", encoding="utf-8") as f:
    lines = f.readlines()

new_lines = []
in_target_array = False

for line in lines:
    if "export const duaForDeceasedFemale: DuaItem[] = [" in line:
        in_target_array = True
        new_lines.append(line)
        continue
    
    if in_target_array and line.strip() == "];":
        in_target_array = False
        new_lines.append(line)
        continue
        
    if in_target_array:
        # Extract arabic text: arabic: "..."
        match = re.search(r'arabic:\s*"(.*?)"', line)
        if match:
            original_arabic = match.group(1)
            new_arabic = apply_replacements(original_arabic)
            # Replace only the arabic part in the line
            # We use replace() on the string but be careful not to replace other things
            # Since we extracted it from arabic: "...", we can reconstruct the replacement
            
            # Safer way: replace the exact match string
            # But wait, if the same string appears in translation (unlikely for Arabic), it might be an issue.
            # But here we are replacing Arabic text, so it should be fine.
            
            # Let's construct the new line by replacing the captured group span
            start, end = match.span(1)
            new_line = line[:start] + new_arabic + line[end:]
            new_lines.append(new_line)
        else:
            new_lines.append(line)
    else:
        new_lines.append(line)

# Write back to file
with open(file_path, "w", encoding="utf-8") as f:
    f.writelines(new_lines)

print("Successfully updated dua-data.ts with corrected Arabic grammar.")
